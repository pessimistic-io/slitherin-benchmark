/*
.̸̠͙̟́́̈́.̸̻͔̀̚͘.̴͓͍̈́͘͜z̵̢̫̫̓̐̔z̵̢̪̝͒̓̈́z̴̪̝͔̈́͛͘.̴̪͙͔̀͘͝x̴̡̘̓̽͜͝4̸͍͓̝̾͑͘2̴̡͍͓͋͘͝x̴͍͖̪̿̈́͠4̴̘͓̫͋̐͋2̸͎̻͙̀͊̓ẍ̸̦̼͙́̔4̴̙̼͓̀͋͌2̴̪̼͍͊͐x̴̘͍͙͐͑͝.̸̞͎͉͌̚͝z̴͎͎͛̚̚͜ź̵͕̙̻͋́z̸̦̼͕̐͒̚
.̴̪͖͔͐͑̕.̸̺̘͔̿͘͠.̵̝͍͔̈́͘x̴͖͔͊͘̕2̴̠̙̙̈́͋͝x̴͉̻̟͊͑͊4̸̡͕̽̓̚͜2̵̡̫͓̈́͐̚x̸͓̠͆̒͝4̵͎̺̼̒̒͘2̵̡̘͎͆̈́̕x̴͕͚̫͊͒̒.̴̺̼̫͐͐.̸͙͓͚̐̈́͊.̸̙͇͑̈́͝
´´´´´´´´´´´´´´´´´´´´´´´$¶´´´´´¶´´´´´¶¢
´´´´´´´´´´´¶¶¶¶¶¶¶´´´´´´´¶¢´´´¶´´´ø¶
´´´´´´´´´´¶¶´´´´ø¶¶¶´´´´´´oø´´ø´´øo
´´´´´´´´´´¶7´´´´´´´¶¶¶´´´´´´4´´´2´´´´o
´´´´´´´¶¶¶¶¶¶¶´´´´´´´¶¶¶7´´´´´´´´42o¶¶¶ø1
´´´´´´´¶¶¶¶¶¶¶´´´´´´´´´¶¶¶¶¶¶¶¶´´21
´´´´´o¶¶¶¶¶¶¶¶¶ø´´´´´´´´´´´´´´´´´´o$¢
´´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´´´´´´´´¢´´42ø´´´2¶¶
´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶o´´´´´´´0$´´´¶
´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´´´´´¶´´´´o¶´
´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´´´¶¶
´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´
´´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´
´´´´´¶¶¶¶¶¶¶¶¶¶¶¶´
´´´´´´´¶¶¶¶¶¶¶¶
.̵̠͎͉̾͒̈́.̵̻͔͊̈́͛͜.̴̞͖̿͌̕͜ẍ̸͙͇͖́̾͝4̵͎̦̫͋̿͘2̴͇̞͍͒͌̕x̴̦̪͒͛v̵̝͖̙̓͑̾ä̸͕̝͓́̔̈́lx̵͔̘͉̀̽̀4̴̡̫͔͒͛͒2̸̠͙͔͛̀͑ẍ̴̦́̔̾͜.̸̼̦̝͑̕͝.̴͚͙̼͋̽͘.̸̘͖͚̈́̔̔
.̸̠͙̟́́̈́.̸̻͔̀̚͘.̴͓͍̈́͘͜ẍ̵̞̝́͒̒x̵̟̞͛̀̈́x̸̞͚̪̓̿4̴̺̟̼͌͊̚2̴̞͓̾͋͋x̴̫͔̓̓d̴͚̞͓̽͘͝e̵̡̢͓͘͝͠g̸̼͔̠̓́͌e̸̟͇͚͊̾n̸̟͕̙͊͘͠x̴̡̪͎͛͋͝4̴̢͙̓̿͘2̴̺̼͔͌̐̒x̸̢͎́́͠x̵͙̺͇͌͝x̵̻͉̞͌̈́͘.̸̟̫̘͆͘͠m̸̞̓́̐͜p̸̠͓͓͑̚.̸͕̪̺͛̓͘z̴͇͔̘̓̐͐z̸̫̻͛͒͘͜z̴̙̻͙͋̾͝
*/
/*
₄₂ ₄₂ ₄₂
wₕy dₒ ᵢ ₛₑₑ ₄₂ ₑᵥₑᵣywₕₑᵣₑ???
wₕₐₜ dₒₑₛ ᵢₜ ₘₑₐₙ???
₄₂ ₄₂ ₄₂
dₒ yₒᵤ ₛₑₑ ᵢₜ ₜₒₒ???
₄₂ ₄₂ ₄₂
₄₂ ₑᵥₑᵣywₕₑᵣₑ 
₄₂₄₂@₀.₀₀₄₂Ξ 
*/

// SPDX-License-Identifier: MIT
pragma solidity ^0.8.7;

import "./ERC721A.sol";
import "./Ownable.sol";
import "./SafeMath.sol";
import "./ReentrancyGuard.sol";
import "./Strings.sol";

contract x424242 is ERC721A, Ownable, ReentrancyGuard {
    using SafeMath for uint256;

    string private _uriprefix = '';
    string private _urisuffix = '.json';
    string private _unrevealeduri;

    uint256 private _maxsupply = 4242;
    uint256 private _maxtokensperwallet = 42;
    uint256 private _maxtokenspertx = 21;
    uint256 private _price = 0.0042 ether;

    bool private _active = false;
    bool private _revealed = false;
    bool private _checkperwallet = true;

    constructor(
        string memory _tokenname,
        string memory _tokensymbol,
        uint256 __maxtokensperwallet,
        uint256 __maxtokenspertx,
        string memory __unrevealeduri
    ) ERC721A(_tokenname, _tokensymbol) {
        setmaxtokensperwallet(__maxtokensperwallet);
        setmaxtokenspertx(__maxtokenspertx);
        setunrevealeduri(__unrevealeduri);
        mint_owner(msg.sender,42);
    }

    function active() public view virtual returns (bool) {
        return _active;
    }

    function activate() public onlyOwner {
        _active = true;
    }

    function checkperwallet() public view virtual returns (bool) {
        return _checkperwallet;
    }

    function deactivate() public onlyOwner {
        _active = false;
    }

    function maxSupply() public view virtual returns (uint256) {
        return _maxsupply;
    }

    function maxTokensPerWallet() public view virtual returns (uint256) {
        return _maxtokensperwallet;
    }

    function maxTokensPerTx() public view virtual returns (uint256) {
        return _maxtokenspertx;
    }

    function mint(uint256 _quantity) public payable nonReentrant {
        require(_active, "sale not active");
        require(_quantity <= _maxtokenspertx, "minted quantity exceeds max tokens per tx");

        uint totalMinted = totalSupply();
        require((totalMinted).add(_quantity) <= _maxsupply, "max tokens minted'");
        require(msg.value >= (_price).mul(_quantity), "not enough eth sent");

        if(_checkperwallet) {
            require(_numberMinted(msg.sender).add(_quantity) <= _maxtokensperwallet, "minted quantity exceeds max tokens per wallet");
        }
        
        _safeMint(msg.sender,_quantity);

    }

    function mint_owner(address to, uint256 _quantity) public onlyOwner nonReentrant {

        uint totalMinted = totalSupply();
        require((totalMinted).add(_quantity) <= _maxsupply, "minted quantity exceeds max tokens'");
        
        _safeMint(to, _quantity);

    }

    function numberMinted(address _wallet) public view virtual returns (uint256) {
        return _numberMinted(_wallet);
    }

    function price() public view virtual returns (uint256) {
        return _price;
    }

    function setmaxtokensperwallet(uint __maxtokensperwallet) public onlyOwner {
        _maxtokensperwallet = __maxtokensperwallet;
    }

    function setmaxtokenspertx(uint __maxtokenspertx) public onlyOwner {
        _maxtokenspertx = __maxtokenspertx;
    }

    function setprice(uint256 __price) public onlyOwner {
        _price = __price;
    }

    function setrevealed(bool __revealed) public onlyOwner {
        _revealed = __revealed;
    }

    function setcheckperwallet(bool __perwallet) public onlyOwner {
        _checkperwallet = __perwallet;
    }

    function setunrevealeduri(string memory __unrevealeduri) public onlyOwner {
        _unrevealeduri = __unrevealeduri;
    }

    function seturiprefix(string memory _uriwithslash) public onlyOwner {
        _uriprefix = _uriwithslash;
    }

    function seturisuffix(string memory __urisuffix) public onlyOwner {
        _urisuffix = __urisuffix;
    }

    function revealed() public view virtual returns (bool) {
        return _revealed;
    }

    function tokenURI(uint256 _tokenId) public view virtual override returns (string memory) {
        require(_exists(_tokenId), 'uri query for nonexistent token id');

        if (!_revealed) {
            return _unrevealeduri;
        }

        string memory baseUri = _baseURI();
        return bytes(baseUri).length > 0 ? string(abi.encodePacked(baseUri, Strings.toString(_tokenId), _urisuffix)) : '';
    }

    function withdraw() external onlyOwner nonReentrant {
        (bool success, ) = payable(owner()).call{value: address(this).balance}('');
        require(success);
    }

    function _baseURI() internal view virtual override returns (string memory) {
        return _uriprefix;
    }

    function _startTokenId() internal view virtual override returns (uint256) {
        return 1;
    }

}
